[282.给表达式添加运算符](https://leetcode-cn.com/problems/expression-add-operators/) 这道题目是属于思路明确但是比较考验基础知识的hard难度题目。

第一反应就是递归，所以来分析一下会不会超时：对于字符串中的每一位数字，都有四种选择：在其后插入+, -, *的一种或者不插入字符，因此有四种情况。字符串的长度最大为10，由于是在字符串中间插入，因此最多插入9个字符，有 4^9≈10^6 种选择，因此不会超时。

所以我们的思路就是：首先用递归求出所有可能的表达式，然后进行中缀表达式求值。(有一种两道medium题目合成一道hard题目的感觉)

递归过于简单，不必详细解释了。

对于中缀表达式求值，一般是转化成后缀表达式再求值。首先看一下怎么转成后缀表达式，需要一个栈来记录后缀表达式结果，还需要一个栈来记录操作符。如果遇到数字，就直接进结果栈，如果遇到符号，就把栈顶所有操作优先级大于等于该符号的出栈后压入结果栈，再把该符号入栈即可。最后，如果符号栈非空，就清空符号栈并压入结果栈。最后结果栈从栈底到栈顶即为后缀表达式。

下一步是后缀表达式求值，从栈底到栈顶计算即可(此时其实不能看作栈了，因为后面的操作都不是栈的基本操作了)，每次拿到栈底的两个元素（必定为数字），再拿到栈底第三个元素（必定为操作符），计算后变为新的栈底即可。

当然，这两步可以合并。具体操作为：定义一个数字栈，一个操作符栈，每次遇到一个数字时，直接压入数字栈，每次遇到操作符时，把操作符栈栈顶所有优先级大于等于该操作符的元素出栈并把该操作符入栈，并且每次出栈时，都弹出数字栈栈顶的两个元素，将计算结果重新压入数字栈。